import{o as r,b as u,c as s,e as g}from"./read_write.3a21e387.js";import"./add_pattern.d92e5b1b.js";function h(t,n){return r(this,void 0,void 0,function(){return u(this,function(i){return[2,s({__tauriModule:"Event",message:{cmd:"unlisten",event:t,eventId:n}})]})})}function b(t,n,i){return r(this,void 0,void 0,function(){return u(this,function(o){switch(o.label){case 0:return[4,s({__tauriModule:"Event",message:{cmd:"emit",event:t,windowLabel:n,payload:typeof i=="string"?i:JSON.stringify(i)}})];case 1:return o.sent(),[2]}})})}function v(t,n,i){return r(this,void 0,void 0,function(){var o=this;return u(this,function(a){return[2,s({__tauriModule:"Event",message:{cmd:"listen",event:t,windowLabel:n,handler:g(i)}}).then(function(e){return function(){return r(o,void 0,void 0,function(){return u(this,function(c){return[2,h(t,e)]})})}})]})})}function y(t,n,i){return r(this,void 0,void 0,function(){return u(this,function(o){return[2,v(t,n,function(a){i(a),h(t,a.id).catch(function(){})})]})})}function d(t,n){return r(this,void 0,void 0,function(){return u(this,function(i){return[2,v(t,null,n)]})})}function p(t,n){return r(this,void 0,void 0,function(){return u(this,function(i){return[2,y(t,null,n)]})})}function l(t,n){return r(this,void 0,void 0,function(){return u(this,function(i){return[2,b(t,void 0,n)]})})}Object.freeze({__proto__:null,listen:d,once:p,emit:l});function _(){return r(this,void 0,void 0,function(){function t(){n&&n(),n=void 0}var n;return u(this,function(i){return[2,new Promise(function(o,a){d("tauri://update-status",function(e){var c;(c=e==null?void 0:e.payload).error?(t(),a(c.error)):c.status==="DONE"&&(t(),o())}).then(function(e){n=e}).catch(function(e){throw t(),e}),l("tauri://update-install").catch(function(e){throw t(),e})})]})})}function m(){return r(this,void 0,void 0,function(){function t(){n&&n(),n=void 0}var n;return u(this,function(i){return[2,new Promise(function(o,a){p("tauri://update-available",function(e){var c;c=e==null?void 0:e.payload,t(),o({manifest:c,shouldUpdate:!0})}).catch(function(e){throw t(),e}),d("tauri://update-status",function(e){var c;(c=e==null?void 0:e.payload).error?(t(),a(c.error)):c.status==="UPTODATE"&&(t(),o({shouldUpdate:!1}))}).then(function(e){n=e}).catch(function(e){throw t(),e}),l("tauri://update").catch(function(e){throw t(),e})})]})})}Object.freeze({__proto__:null,installUpdate:_,checkUpdate:m});function $(t){return t===void 0&&(t=0),r(this,void 0,void 0,function(){return u(this,function(n){return[2,s({__tauriModule:"Process",message:{cmd:"exit",exitCode:t}})]})})}function w(){return r(this,void 0,void 0,function(){return u(this,function(t){return[2,s({__tauriModule:"Process",message:{cmd:"relaunch"}})]})})}Object.freeze({__proto__:null,exit:$,relaunch:w});const f=document.querySelector("#check_updates");f&&f.addEventListener("click",async()=>{try{const{shouldUpdate:t,manifest:n}=await m();if(console.log(n,t),t){let o=await confirm(`We have a new update for you!
Click OK to Install it.`);console.log(o),o==!0?(console.log("Update installed"),await _(),await w()):alert("Cancelled Update")}else alert("No update available")}catch(t){console.log(t)}});
